(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{246:function(e,t,a){"use strict";a.r(t);var r=a(26),n=(a(28),a(42),a(44)),i=a.n(n),c=a(8),l=a.n(c),s=a(0),o=a.n(s),u=(a(16),a(2),a(14)),m=a(11),d=a(45),p=a(3),f=a(46),v=a(20),b=(a(29),a(94),a(98),a(186),a(1)),h=a.n(b),y=(a(55),a(4)),E=a.n(y),x=a(18),g=a.n(x),U=a(19),j=a.n(U),T=a(13),O=a(12),w=function(){function e(t){var a=t.baseUrl;g()(this,e),this.token=Object(O.a)(),this.baseUrl=a}var t;return j()(e,[{key:"getCover",value:(t=E()(h.a.mark((function e(t){var a,r,n,i,c,l,s,o,u,m,d,p,f,v,b,y,E;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.id,n=t.idType,i=void 0===n?"pid":n,c=t.format,l=void 0===c?["jpeg"]:c,s=t.size,o=void 0===s?["default"]:s,u=t.generic,m=void 0===u||u,r){e.next=3;break}throw Error("id must be specified");case 3:return d="".concat(this.baseUrl,"/cover/").concat(i,"/").concat(encodeURIComponent(r)),p=l.join(","),f=o.join(","),v="".concat(d,"?format=").concat(p,",&size=").concat(f,",&generic=").concat(m.toString()),e.next=9,Object(T.a)(v,{headers:{Accept:"application/json",Authorization:"Bearer ".concat(this.token)}});case 9:if(200===(b=e.sent).status){e.next=12;break}throw Error(b.status);case 12:return e.next=14,b.json();case 14:return y=e.sent,E=y.imageUrls.filter((function(e){return l.some((function(t){return e.format===t}))&&o.some((function(t){return e.size===t}))})),e.abrupt("return",null==E?void 0:null===(a=E[0])||void 0===a?void 0:a.url);case 17:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}(),N="retrieved",k="empty",_="initial";function S(e){var t=e.className;return o.a.createElement(u.a,{className:t,br:"0px",mb:"0px",mt:"0px",height:"154px",width:"100px"})}function C(e){var t=e.status,a=e.src,r=e.alt,n=e.coverClassName,i=e.className;return t===_?o.a.createElement(S,{className:n}):t===k?null:o.a.createElement("img",{className:i,src:a,alt:r})}S.defaultProps={className:""},C.defaultProps={status:"initial",src:"",coverClassName:"",className:""};var P=C;function z(e){var t=e.style;return o.a.createElement("div",{className:"ddb-simple-material-skeleton",style:t},o.a.createElement("figure",{className:"ddb-reset"},o.a.createElement(S,null)),o.a.createElement("div",null,o.a.createElement(u.a,{width:"45px",mb:"12px"}),o.a.createElement(u.a,{width:"145px",mb:"12px"}),o.a.createElement(u.a,{width:"95px"})))}function L(e){var t=e.item,a=e.coverSize,r=e.materialUrl,n=e.authorUrl,i=e.coverServiceUrl,c=e.ofText,u=e.className,m=e.dataClass,d=e.style,p=function(e){var t=e.id,a=e.format,r=void 0===a?"jpeg":a,n=e.size,i=void 0===n?"default":n,c=e.idType,o=void 0===c?"pid":c,u=e.generic,m=void 0!==u&&u,d=e.coverServiceUrl,p=void 0===d?"https://cover.dandigbib.org/api":d,f=Object(s.useState)({status:_}),v=l()(f,2),b=v[0],h=v[1];return Object(s.useEffect)((function(){new w({baseUrl:p}).getCover({id:t,size:[i],format:[r],idType:o,generic:m}).then((function(e){return h({status:N,url:e})})).catch((function(){return h({status:k})}))}),[t,r,i,o,m,p]),b||{status:k}}({id:t.pid,size:a,coverServiceUrl:i});return o.a.createElement("section",{className:"ddb-simple-material ".concat(u),style:d},p.status!==k&&o.a.createElement("figure",{className:"ddb-simple-material__cover"},o.a.createElement("a",{href:Object(v.a)({text:r,placeholders:{pid:encodeURIComponent(t.pid)}})},o.a.createElement(P,{status:p.status,src:p.url,alt:t.title}))),o.a.createElement("div",{className:"ddb-simple-material__data ".concat(m)},t.type&&o.a.createElement("span",{className:"ddb-simple-material__type"},t.type),o.a.createElement("a",{href:Object(v.a)({text:r,placeholders:{pid:encodeURIComponent(t.pid)}})},o.a.createElement("h2",{className:"ddb-simple-material__title"},t.title)),o.a.createElement("p",{className:"ddb-simple-material__author-year"},t.creators&&o.a.createElement("span",{className:"ddb-simple-material__author"},"".concat(c," "),t.creators.map((function(e,a){return o.a.createElement("span",{key:e},o.a.createElement("a",{href:Object(v.a)({text:n,placeholders:{author:encodeURIComponent(e)}})},e),t.creators[a+1]?", ":" ")}))),t.year&&o.a.createElement("time",{dateTime:t.year,className:"ddb-simple-material__year"},"(",t.year,")"))))}z.defaultProps={style:{}},L.defaultProps={coverSize:"small",ofText:"Af",className:"",dataClass:"",style:{}};var B=L;function D(e,t){return o.a.createElement(f.a,{key:t,aside:o.a.createElement(u.a,{width:"136px",height:"50px"})},o.a.createElement(z,null))}function R(e){var t=e.status,a=e.items,r=e.onRemove,n=e.materialUrl,i=e.authorUrl,c=e.coverServiceUrl,l=e.removeButtonText,s=e.emptyListText,v=e.errorText,b=e.ofText;return"initial"===t?o.a.createElement(d.a,null,Object(u.b)(4).map(D)):"failed"===t?o.a.createElement(p.a,{type:"assertive",variant:"warning",message:v}):"ready"===t&&0===a.length?o.a.createElement(p.a,{type:"polite",message:s}):o.a.createElement(d.a,null,a.map((function(e){return o.a.createElement(f.a,{key:e.pid,aside:o.a.createElement(m.a,{className:"ddb-checklist__button",variant:"charcoal",align:"center",onClick:function(){return r(e.pid)}},l)},o.a.createElement(B,{item:e,coverSize:"small",materialUrl:n,authorUrl:i,coverServiceUrl:c,ofText:b,dataClass:"ddb-checklist__data"}))})))}R.defaultProps={items:[],status:"initial"};var I=R,A=a(60),F=a(62),J=(a(47),a(52),a(53),a(41),a(54),a(24)),K=a.n(J);function M(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var W=function(){function e(){g()(this,e)}return j()(e,null,[{key:"format",value:function(e){var t,a,r,n;return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?M(a,!0).forEach((function(t){K()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):M(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{pid:null===(t=e.pid)||void 0===t?void 0:t[0],creators:e.dcCreator?e.dcCreator:e.creator,title:null===(a=e.dcTitleFull)||void 0===a?void 0:a[0],type:null===(r=e.typeBibDKType)||void 0===r?void 0:r[0],year:null===(n=e.date)||void 0===n?void 0:n[0]})}}]),e}();function q(e){var t=e.materialListUrl,a=e.materialUrl,r=e.authorUrl,n=e.coverServiceUrl,c=e.removeButtonText,u=e.emptyListText,m=e.errorText,d=e.ofText,p=Object(s.useState)([]),f=l()(p,2),v=f[0],b=f[1],h=Object(s.useState)("initial"),y=l()(h,2),E=y[0],x=y[1];return Object(s.useEffect)((function(){new A.a({baseUrl:t}).getList().then((function(e){return e&&e.length?(new F.a).getWork({pids:e,fields:["dcTitleFull","pid","dcCreator","creator","typeBibDKType","date"]}):[]})).then((function(e){x("ready"),b(e.map(W.format))})).catch((function(){x("failed")}))}),[t]),o.a.createElement(I,{status:E,items:v,onRemove:function(e){var a=i()(v);b(v.filter((function(t){return t.pid!==e}))),new A.a({baseUrl:t}).deleteListMaterial({materialId:e}).catch((function(){x("failed"),setTimeout((function(){x("ready"),b(a)}),2e3)}))},materialUrl:a,authorUrl:r,coverServiceUrl:n,removeButtonText:c,emptyListText:u,errorText:m,ofText:d})}q.defaultProps={materialListUrl:"https://test.materiallist.dandigbib.org",removeButtonText:"Fjern fra listen",emptyListText:"Listen er tom",errorText:"Noget gik galt",ofText:"Af"};var G=q;Object(r.a)({appName:"checklist",app:G})}},[[246,1,0]]]);
//# sourceMappingURL=checklist.js.map