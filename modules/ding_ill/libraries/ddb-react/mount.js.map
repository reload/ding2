{"version":3,"sources":["webpack:///./src/core/mount.js"],"names":["initial","mount","context","querySelectorAll","forEach","container","appName","dataset","ddbApp","app","window","ddbReact","apps","innerHTML","render","createElement","withErrorBoundary","ErrorBoundary","unmount","setToken"],"mappings":"yIAoDQA,E,wmBAvCR,SAASC,EAAMC,GACRA,GACiBA,EAAQC,iBAAiB,kBAiBjCC,SAfd,SAAkBC,GAAW,UACrBC,EAAUD,aAAH,YAAGA,EAAWE,eAAd,aAAG,EAAoBC,OAC9BC,EAAG,UAAGC,OAAOC,gBAAV,uBAAG,EAAiBC,YAApB,aAAG,EAAwBN,GAEfG,IAAQJ,EAAUQ,WAErCC,iBACEC,wBAAcC,4BAAkBP,EAAKQ,KAAxB,KACRZ,EAAUE,UAEfF,MAaR,SAASa,EAAQhB,GACVA,GACiBA,EAAQC,iBAAiB,kBAMjCC,SAJd,SAAoBC,GACYA,EACRQ,UAAY,MAM9Bb,EAAU,CACdY,KAAM,GACNO,aACAlB,QACAiB,WAEFR,OAAOC,SAAP,KACMD,OAAOC,UAAY,GADzB,GAEKX,K","file":"mount.js","sourcesContent":["import { createElement } from \"react\";\nimport { render } from \"react-dom\";\n\nimport { withErrorBoundary } from \"react-error-boundary\";\nimport ErrorBoundary from \"../components/alert/alert\";\nimport { setToken } from \"./token\";\n\n/**\n * We look for containers and corresponding applications.\n * Thereafter we mount them if a corresponding container and application can be found.\n *\n * @param {HTMLElement} context - The HTML element you want to search for app containers in.\n */\nfunction mount(context) {\n  if (!context) return;\n  const appContainers = context.querySelectorAll(\"[data-ddb-app]\");\n\n  function mountApp(container) {\n    const appName = container?.dataset?.ddbApp;\n    const app = window.ddbReact?.apps?.[appName];\n    // Ensure that the application exists and that the container isn't already populated.\n    const isValidMount = app && !container.innerHTML;\n    if (isValidMount) {\n      render(\n        createElement(withErrorBoundary(app, ErrorBoundary), {\n          ...container.dataset\n        }),\n        container\n      );\n    }\n  }\n\n  appContainers.forEach(mountApp);\n}\n\n/**\n * If you want to remove all ddb apps in a certain context.\n *\n * @param {HTMLElement} context - The HTML element you want to search for app containers in.\n */\nfunction unmount(context) {\n  if (!context) return;\n  const appContainers = context.querySelectorAll(\"[data-ddb-app]\");\n\n  function unMountApp(container) {\n    const appContainerToUnmount = container;\n    appContainerToUnmount.innerHTML = \"\";\n  }\n  appContainers.forEach(unMountApp);\n}\n\nfunction init() {\n  const initial = {\n    apps: {},\n    setToken,\n    mount,\n    unmount\n  };\n  window.ddbReact = {\n    ...(window.ddbReact || {}),\n    ...initial\n  };\n}\n\n// Inject into the global namespace for third party access.\ninit();\n"],"sourceRoot":""}