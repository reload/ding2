(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{286:function(e,t,a){"use strict";a.r(t);var i=a(18),r=(a(52),a(163),a(0)),n=a.n(r),l=a(36),s=(a(2),a(17),a(6)),c=a.n(s),o=a(21),d=a(91),u=a(8);function p(e){var t=e.status,a=e.checkingText,i=e.progressText,l=e.unavailableText,s=e.invalidPickupBranchText,p=e.onClick,m=e.text,b=e.helpText,g=e.errorText,x=e.successText,v=e.successMessage,k=Object(r.useState)(!0),h=c()(k,2),f=h[0],T=h[1];switch(t){case"initial":return null;case"checking":return n.a.createElement("div",{className:"ddb-order-material__container"},n.a.createElement(u.a,{message:a,type:"polite",variant:"info"}));case"unavailable":return n.a.createElement("div",{className:"ddb-order-material__container"},n.a.createElement(u.a,{message:l,type:"polite",variant:"info"}));case"invalid branch":return n.a.createElement("div",{className:"ddb-order-material__container"},n.a.createElement(u.a,{message:s,type:"polite",variant:"warning"}));case"processing":return n.a.createElement("div",{className:"ddb-order-material__container"},n.a.createElement(u.a,{message:i,type:"polite",variant:"info"}));case"finished":return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"ddb-order-material__container"},n.a.createElement(u.a,{message:x,type:"polite",variant:"success"})),n.a.createElement(d.a,{label:"Materialet bestilt",showCloseButton:!0,dropDown:!0,isOpen:f,onDismiss:function(){return T(!1)}},n.a.createElement(u.a,{message:v,type:"polite",variant:"blank"})));case"failed":return n.a.createElement("div",{className:"ddb-order-material__container"},n.a.createElement(u.a,{message:g,type:"polite",variant:"warning"}));default:return n.a.createElement("div",{className:"ddb-order-material__container"},n.a.createElement(o.a,{variant:"black",align:"left",onClick:p},m),b?n.a.createElement("div",{className:"ddb-order-material__help"},b):null)}}p.defaultProps={helpText:null,status:"initial"};var m=p,b=a(33),g=a(45);function x(e){return"string"==typeof e?e.split(","):e}function v(e){var t=e.text,a=e.helpText,i=e.successText,s=e.successMessage,c=e.errorText,o=e.checkingText,d=e.progressText,u=e.unavailableText,p=e.invalidPickupBranchText,v=e.ids,k=e.loginUrl,h=e.illCheckUrl,f=e.pickupBranch,T=e.expires,E=function(e){return"string"!=typeof e?e.join():e}(v),_=Object(l.c)((function(e){return e.orderMaterial.status[E]}))||"initial",j=Object(l.b)(),w=b.a.isAuthenticated();return Object(r.useEffect)((function(){"initial"===_&&j(Object(g.a)({id:E,pids:x(v),illCheckUrl:h})),"pending"===_&&(w?j(Object(g.c)({id:E,pids:x(v),pickupBranch:f,expires:T})):b.a.authenticationFailed()&&(j(Object(g.d)({id:E})),j(Object(g.f)({id:E}))))}),[v,f,h,T,w,E,_,j]),n.a.createElement(m,{text:t,helpText:a,errorText:c,successText:i,successMessage:s,checkingText:o,progressText:d,unavailableText:u,invalidPickupBranchText:p,status:_,onClick:function(){j(Object(g.e)({id:E})),w||b.a.authenticate(k)},loginUrl:k,materialIds:x(v)})}v.defaultProps={text:"Bestil materiale",helpText:null,checkingText:"Undersøger mulighed for fjernlån",progressText:"Bestiller materiale",unavailableText:"Kan ikke fjernlånes",invalidPickupBranchText:"Dit afhentningsbibliotek modtager ikke fjernlån",errorText:"Det lykkedes ikke at bestille materialet.",successText:"Materialet er bestilt",successMessage:"Materialet er bestilt, dit bibliotek vil give besked når det er klar til afhentning."};var k=v;Object(i.a)({appName:"order-material",app:k})}},[[286,1,0]]]);
//# sourceMappingURL=order-material.js.map